const demoPlanEstudio = [
    {
        "id": 1,
        "bloque": "Enero",
        "asignaturas": [
            {
                "id": "mt101",
                "nombre": "Carrera Conmemorativa",
                "descripcion": "Una carrera de 5k",
                "orden": 0,
            },
            {
                "id": "mt301",
                "nombre": "Caminata Sonrisa",
                "descripcion": "Una caminata de 3k para promover deteccion tempranada del cancer",
                "orden": 1,
            },
            {
                "id": 'qm101',
                "nombre": "Venta de Comida",
                "descripcion": "Tendremos venta de variedad de alimentos y todo lo recaudado ira a los tratamientos",
                "orden": 2,

            },
            {
                "id": 'es101',
                "nombre": "Operacion Sonrisa",
                "descripcion": "Los niños haran dibujos esperando que sean comprados por una persona",
                "orden": 3,
            },
            {
                "id": 'if101',
                "nombre": "Subasta de Esperanza",
                "descripcion": "Substa de varios objetos donados por empresas",
                "orden": 4
            },
        ]
    },
    {
        "id": 2,
        "bloque": "Febrero",
        "asignaturas": [
            {
                "id": "mt102",
                "nombre": "Talleres de Prevencion",
                "descripcion": "En este taller se le enseñara a las personas a tratar de detectar el cancer a temprana edad",
                "orden": 0,
            },
            {
                "id": "fi101",
                "nombre": "Donacion de cabello",
                "descripcion": "Para las personas que deseen donar su cabello y apoyar la causa",
                "orden": 1,
            },
            {
                "id": 'ad101',
                "nombre": "Talleres de Nutricion",
                "descripcion": "Se aprendera como llevar un estilo de vida mas sano y educado",
                "orden": 2,
            },
            {
                "id": 'es102',
                "nombre": "Maraton de Donacion de Sangre",
                "descripcion": "En este evento se recolectara las donaciones de sangre necesarias para los pacientes",
                "orden": 3,
            },
            {
                "id": 'if102',
                "nombre": "Festival de linternas",
                "descripcion": "Estaran linternas a la venta y se lanzaran todas a la hora de la noche como simbolo de esperanza",
                "orden": 4,
            },
        ]
    },
    {
        "id": 3,
        "bloque": "Marzo",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Dia de Pelicula",
                "descripcion": "Habra venta de comida y se proyectara una pelicula en una pantalla grande",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Yoga por la Mañana",
                "descripcion": "Para las personas que les gusta realizar ejercicio, tendremos un profesor experto y se cobrara por entrada",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Torneo de Futbol",
                "descripcion": "Se realizara un campeonato de futbol y el ganador tendre un premio, se cobrara inscripcion",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Cocina Misteriosa",
                "descripcion": "Deberan realizar un platillo de su especialidad que pueda sorprender a los comenzales y el ganador tendra un reconocimiento",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Taller de lectura",
                "descripcion": "Noche en la cual nos comentaras sobre tu libro favorito, tus autores favoritos y una fogata",
                "orden": 4,
            },
        ]
    },
    {
        "id": 4,
        "bloque": "Abril",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Exposicion de Salud",
                "descripcion": "Una feria en la cual se ofrecera informacion sobre la prevencion del cáncer y se ofreceran examenes medicos gratis",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Bailando por un Sueño",
                "descripcion": "Una competencia de baile donde promovemos la felicidad, la diversion, gozar de un buen baile y que gane el mejor",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Concurso de Talentos",
                "descripcion": "Evento en un escenario en uno de nuestros centros, demuestra de todos lo qeu eres capaz y recaudaremos fondos a traves de la inscripcion",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Ciclovia",
                "descripcion": "Todos unidos por una gran causa, por mejorar la salud, un circuito diseñado con diferentes niveles de dificultad",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Bingo Poderosamente Benefico",
                "descripcion": "Un bingo con premios para los ganadoras, compra tu boleto y no pierdas esta gran oportunida de apoyar la causa",
                "orden": 4,
            },
        ]
    },
    {
        "id": 5,
        "bloque": "Mayo",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Exposicion de Fotografias",
                "descripcion": "Muestra fotografias en la lucha contra el cancer, la superacion de las personas",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Campeonato de Videojuegos",
                "descripcion": "Competencia entre los participantes a ver quien es el mejor, las inscripciones seran recaudadas para los tratamientos",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Recreovias",
                "descripcion": "Recuerda todas las actividades que realizabas de niño o si aun lo eres, desmuestra eso niño interior",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Charlas informativas",
                "descripcion": "Medicos especialistas estaran presentes repartiendo charlas con la mejor informacion posible",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Dia de testimonios",
                "descripcion": "Oidras escuchar a personas las cuales superaron el cancer con un gran valor y como es su vida a dia de hoy",
                "orden": 4,
            },
        ]
    },
    {
        "id": 6,
        "bloque": "Junio",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Venta de Camisetas",
                "descripcion": "Compra tu camiseta personalizada apoyando a los niños con cancer y ayudalos a superar esta gran lucha",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Carnaval con Tematica",
                "descripcion": "Ven disfrutado de tu superheroe favorito o de tu personaje favorito y habra venta de comida y varias actividades",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Taller de Fotografia",
                "descripcion": "Mejora tus habilidades como fotografo, aprende a manipular la camara de la manera correcta, correcion de luz, apertura correcta",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Clases de Danza",
                "descripcion": "Aprende la bella arte de la danza, demuestra que te puedes convertir en un gran bailar con esfuerzo",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Noches de Historia y Cuentos",
                "descripcion": "Compra tus palomitas y acampa con nosotros y disfruta de las grandes historia de la noche te sorprenderan",
                "orden": 4,
            },
        ]
    },
    {
        "id": 7,
        "bloque": "Julio",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Dia de Voluntarios",
                "descripcion": "De esta manera podras apoyar si no puedes hacerlo de manera monetaria, muchas veces necesitamos un asistente extra",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Karaoke al Aire libre",
                "descripcion": "Ven y ilustranos con esa gran voz, gana el concurso de canto y coronate campeon",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Adopcion de Arboles",
                "descripcion": "Esta actividad mas que todo es para motivar a los pacientes con su espiritu, dando un mensaje de apoyo",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Taller de Robotica",
                "descripcion": "La mejor solucion para que los jovenes y cualquiera pueda aprender sobre la tecnologia avanzada",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Concurso de Disfrazes Infantil",
                "descripcion": "Nada es mas increible que la pureza que tienen los bebes, disfrazalo lo mejor posible",
                "orden": 4,
            },
        ]
    },
    {
        "id": 8,
        "bloque": "Agosto",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Noche de Musica Clasica",
                "descripcion": "Disfruta de una velada tranquila con la mejor musica clasica y artistas cantando en vivo",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Ajedrez Benefico",
                "descripcion": "Es un concurso de destresa, las inscripciones apoyaran la causa",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Dia de Masaje",
                "descripcion": "Masajes relajantes y los fondos estaran dirigidos para los pacientes",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Exhibicion de Autos Clasicos",
                "descripcion": "Muestra autos fuertes, clasicos, deportivos, con un gran estilo, cada entrada apoya la causa",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Venta de Paraguas Con El logo de la Fundacion",
                "descripcion": "Ven y apoya de la manera mas sincera posible y disfruta de tu gran paraguas",
                "orden": 4,
            },
        ]
    },
    {
        "id": 9,
        "bloque": "Septiembre",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Concurso de Mascotas",
                "descripcion": "Demustra todos los trucos y las habilidades de tus mascotas",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Recibimiento de Donacion En un Lugar Especifico",
                "descripcion": "Puedes llegar a dejar tu aporte al Parque santisimo, cualquier donacion es un gran apoyo",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Maraton de 10 KM",
                "descripcion": "Cada kilometro es una gran ayuda para que los pacientes puedan optar de un gran espacio en el cual puedan estar",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Taller para Niños De Pintura",
                "descripcion": "Deja que los niños aprendan a liberar sus emociones por medio del arte",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Dia de Voluntarios",
                "descripcion": "Si te nace puedes venir a ayudar este gran dia, cambiando la perspectiva de los pacientes y motivalos a no dejar de luchar",
                "orden": 4,
            },
        ]
    },
    {
        "id": 10,
        "bloque": "Octubre",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Por confirmar",
                "descripcion": "",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Dia de pijama mas loca",
                "descripcion": "Vistete de la mejor forma posible con tu pijama llamativa",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Fogata",
                "descripcion": "Una fogata con malvaviscos para disfrutar de la noche",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Maraton de 42km",
                "descripcion": "Luchemos por un lugar mejor, con estaciones y las entradas colaboran para la causa",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Concurso de canciones",
                "descripcion": "La cancion mas autentica sera premiada con un trofe hecho a mano por las artes de los pacientes",
                "orden": 4,
            },
        ]
    },
    {
        "id": 11,
        "bloque": "Noviembre",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Sin asignar",
                "descripcion": "",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Dia de Profesiones",
                "descripcion": "Nos visitaran varias personas de diferentes profesiones, policias, bomberos explicando lo que viven cada dia",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Venta de comida",
                "descripcion": "Se vendera de todo tipo de comida casera, ademas se apoyaran negocios que estan comenzando",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Dia de trend",
                "descripcion": "Ese dia haremos que toda la comunidad realice un video dedicado a la causa para que sea mas apoyada",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Celebracion por los que Ganaron la lucha",
                "descripcion": "Ese dia disfrutaremos de la mejor manera con las personas que despues de su gran esfuerzo logran ganara la lucha",
                "orden": 4,
            },
        ]
    },
    {
        "id": 12,
        "bloque": "Diciembre",
        "asignaturas": [
            {
                "id": "mt103",
                "nombre": "Fiesta celebrando la epoca navideña",
                "descripcion": "Celebraremos la llegada de la navidad de la mejor manera, compartiendo entre todos con una gran sonrisa y con lo que tenemos",
                "orden": 0,
            },
            {
                "id": "fi102",
                "nombre": "Dia de decoracion",
                "descripcion": "Este dia premiaremos con una piñata a la mejor decoracion realizada en el centro y ademas los niños podran disfrutar, apoya la causa comprando dulces ",
                "orden": 1,
            },
            {
                "id": 'ad102',
                "nombre": "Dia de Armar arbol navideño",
                "descripcion": "Ayudanos a decorar el arbol navideño, muestranos ese gran espiritu y que todo se vea de la mejor manera posible",
                "orden": 2,
            },
            {
                "id": 'if103',
                "nombre": "Dia de regalos",
                "descripcion": "Ese dia les damos unos pequeños detalles pero sinceros a los pacientes del centro",
                "orden": 3,
            },
            {
                "id": 'if200',
                "nombre": "Operacion Sonrisa",
                "descripcion": "Este dia, una vez al año se realiza una actividad para que los pacientes puedan ver pequeños fuegos artificales",
                "orden": 4,
            },
        ]
    }
];

class PlanDeEstudio {
    planDeEstudio = [];
    contenedor = null;
    currentAsignatura = null;

    asignaturasRef = {};

    constructor(planDeEstudio, contenedorSelector = '#planDeEstudio'){
        if(planDeEstudio) {
            this.planDeEstudio = planDeEstudio;
        } else {
            throw new Error("Plan de Estudio es Requerido");
        }
        this.contenedor = document.querySelector(contenedorSelector);

        if (this.contenedor) {
            this.updateUI();
        } else {
            throw new Error(`El selector ${contenedorSelector} no representa un nodo en el documento actual`);
        }
    }

    updateUI(){
        this.contenedor.classList.add("plan");
        this.planDeEstudio.forEach( (bloque) => {
            this.contenedor.appendChild(this.generateBlockUI(bloque));
        } );
    }

    generateBlockUI(bloque){
        const bloqueUI = document.createElement("SECTION");
        bloqueUI.classList.add('bloque');
        const bloqueLabel = document.createElement("DIV");
        bloqueLabel.classList.add('label');
        bloqueLabel.setAttribute("id",`blq_${bloque.id}]`)
        bloqueLabel.innerHTML = bloque.bloque;
        const bloqueAsignaturas = document.createElement("DIV");
        bloqueAsignaturas.classList.add('asignaturas');

        bloque.asignaturas.forEach((asignatura)=>{
            bloqueAsignaturas.appendChild(this.generateAsignatura(asignatura));
        });

        bloqueUI.appendChild(bloqueLabel);
        bloqueUI.appendChild(bloqueAsignaturas);
        return bloqueUI;
    }

    generateAsignatura(asignatura){
        const asignaturaUI = document.createElement("DIV");
        asignaturaUI.classList.add("asignatura");
        asignaturaUI.setAttribute('id', `${asignatura.id}`);
        if( asignatura.requisitos) {
            asignaturaUI.setAttribute('data-requisitos', JSON.stringify(asignatura.requisitos));
            asignatura.requisitos.forEach((req)=>{
                let apertura = [];
                if(this.asignaturasRef[req]){
                    apertura = JSON.parse(this.asignaturasRef[req].getAttribute('data-apertura') || '[]');
                }
                if(!apertura.includes(asignatura.id)) {
                    apertura.push(asignatura.id);
                }
                if (apertura.length > 0) {
                    this.asignaturasRef[req].setAttribute('data-apertura', JSON.stringify(apertura));
                }
            });
        }
        asignaturaUI.innerHTML = `<span>${asignatura.nombre}<br/>(${asignatura.descripcion})<br></span>`;

        // eventos del mouse
        // mouseenter
        asignaturaUI.addEventListener('mouseenter', ()=>{
            //CLOJURE
            this.currentAsignatura = asignaturaUI;
            this.currentAsignatura.classList.add("selected");
            let requisitos = JSON.parse(this.currentAsignatura.dataset.requisitos || '[]');
            let apertura = JSON.parse(this.currentAsignatura.dataset.apertura || '[]');

            requisitos.forEach((req)=>{
                this.asignaturasRef[req].classList.add('requisito');
            });
            apertura.forEach((apt)=>{
                this.asignaturasRef[apt].classList.add('apertura');
            });
        });
        // mouseleave
        asignaturaUI.addEventListener('mouseleave', ()=>{
            this.currentAsignatura.classList.remove("selected");
            let requisitos = JSON.parse(this.currentAsignatura.dataset.requisitos || '[]');
            let apertura = JSON.parse(this.currentAsignatura.dataset.apertura || '[]');
            requisitos.forEach((req)=>{
                this.asignaturasRef[req].classList.remove('requisito');
            });
            apertura.forEach((apt)=>{
                this.asignaturasRef[apt].classList.remove('apertura');
            });
            this.currentAsignatura = null;
        });

        this.asignaturasRef[asignatura.id] = asignaturaUI;

        return asignaturaUI;
    }
}


document.addEventListener('DOMContentLoaded', () => {
    const form = document.querySelector('form');
    const thankYouMessage = document.querySelector('.thank-you-message');
    
    form.addEventListener('submit', (event) => {
        event.preventDefault(); 
        thankYouMessage.style.display = 'block'; 
        form.reset(); 
    });
});

document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('FormularioRegistro');
    
    form.addEventListener('submit', (event) => {
        event.preventDefault(); 
        
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const message = document.getElementById('message').value.trim();

        if (!name || !email || !message) {
            alert('Por favor, complete todos los campos.');
            return;
        }
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert('Por favor, ingrese un correo electrónico válido.');
            return;
        }
        alert('¡Gracias por tu mensaje! Nos pondremos en contacto contigo pronto.');
        form.reset();
    });
});

document.addEventListener('DOMContentLoaded', () => {
    const faqs = document.querySelectorAll('.faq');
    faqs.forEach(faq => {
        faq.querySelector('h3').addEventListener('click', () => {
            faq.classList.toggle('active');
        });
    });
});


        document.addEventListener('DOMContentLoaded', () => {
            const form = document.querySelector('form');
            const thankYouMessage = document.querySelector('.thank-you-message');
            
            form.addEventListener('submit', (event) => {
                event.preventDefault(); 
                thankYouMessage.style.display = 'block'; 
                form.reset(); 
            });
        });